# Custom ID Support

- Implementation Owner: @lohanidamodar
- Start Date: 25-06-2021
- Target Date: (expected date of completion, dd-mm-yyyy)
- Appwrite Issue: https://github.com/appwrite/appwrite/issues/984, https://github.com/appwrite/appwrite/issues/1222

## Summary

[summary]: #summary

<!-- Brief explanation of the proposed contribution. Write your answer below. -->
We are planning to support custom IDs to our resources like collections, documents, function tags and other resources. These will allow developers to provide pretty and understandable names to resources such as collections where IDs are required while making a query request.

## Problem Statement (Step 1)

[problem-statement]: #problem-statement

**What problem are you trying to solve?**

Developers want to name their resources with their own custom ID that they can easily query with. This will also help make query URL understandable and pretty.

**What is the context or background in which this problem exists?**

At the moment the IDs for all the resources are auto generated by Appwrite. Developers are forced to use the generated IDs in their applications to make queries. The generated ids are random and not easily understandable.

**Once the proposal is implemented, how will the system change?**

Every resource creation API will have an optional **id** attribute. Whenever **id** is not provided Appwrite will still generate the IDs as it is already doing. IDs will not be modifiable once the resource is created.

## Design proposal (Step 2)

[design-proposal]: #design-proposal

<!--
This is the technical portion of the RFC. Explain the design in sufficient detail keeping in mind the following:

- Its interaction with other parts of the system is clear
- It is reasonably clear how the contribution would be implemented
- Dependencies on libraries, tools, projects or work that isn't yet complete
- New API routes that need to be created or modifications to the existing routes (if needed)
- Any breaking changes and ways in which we can ensure backward compatibility.
- Use Cases
- Goals
- Deliverables
- Changes to documentation
- Ways to scale the solution

Ensure that you include examples, code-snippets etc. to allow the community to understand the proposed solution. **It would be best if the examples use naming conventions that you intend to use during the actual implementation so that changes can be suggested early on during the development.**

Write your answer below.

-->
Resources that can have Custom IDs
- Projects
- Collections
- Documents
- Buckets
- Files
- Users
- Function tags
- Tasks
- Webhooks
- Functions
- Teams
- Memberships
- Sessions
- Executions
- and more

Basically all the resources in Appwrite that has a Create endpoint and all future similar resources will support Custom ID.

The create resource endpoints for above resources will have a first required **id** parameter where users can send their custom id following the guidelines for validation. In every endpoint, if the **id** parameter is received empty (required for backward compatibility with existing SDKs) or pre defined string, Appwrite will still generate the ids as it is already doing.

We can use the existing key validator to validate the custom id as well.

### Some guidelines for custom ids

- Can be at most 36 characters
- Can be Alphanumeric
- Can contain `_` but not at the beginning of the id
- Cannot contain any other special characters
- If ID already exists, it will throw an error

### UI Changes

With support for Custom ID, certain services that already have Name becomes confusing and not so useful. So we suggest following changes.

Services that have names where we are depricating name field and use ID instead. Where ID will not be set to auto generate, but can choose to auto generate

1. Project
2. Platform
3. Function
4. Collection
5. API Key
6. Webhook
7. Team

Services where we are deciding to set ID field to auto generate as default
1. Users
2. File
3. Membership
4. Execution

While deciding where to set auto generation by default, we have considered the volume of data that might be inserted as well as the importance and use cases of id. For example, Projects, platforms, Functions, etc, will be few in numbers and their IDs will be used extensively in APIs so are not set to auto generate by default. However, services like Users, File, Execution will be huge in numbers and IDs are not use extensively, are set to auto generate by default.

### Prior art

[prior-art]: #prior-art

<!--

Discuss prior art, both the good and the bad, in relation to this proposal. A
few examples of what this can include are:

- Does this functionality exist in other software and what experience has their
  community had?
- For other teams: What lessons can we learn from what other communities have
  done here?
- Papers: Are there any published papers or great posts that discuss this? If
  you have some relevant papers to refer to, this can serve as a more detailed
  theoretical background.

This section is intended to encourage you as an author to think about the
lessons from other software, provide readers of your RFC with a fuller picture.
If there is no prior art, that is fine - your ideas are interesting to us
whether they are brand new or if it is an adaptation from other software.

Write your answer below.
-->

### Unresolved questions

[unresolved-questions]: #unresolved-questions

<!-- What parts of the design do you expect to resolve through the RFC process before this gets merged? -->

#### SDKs
How to make SDKs look pretty when people donâ€™t want custom **id** and want Appwrite to generate 
- We could pass predefined String "uid()" or "unique()" -> `database.createCollection("uid()", "Avatars")` or `database.createCollection("unique()", "Avatars")`
- We could pass empty string ->  `database.createCollection("", "Movies")`
- We could create a separate class -> `database.createCollection(new Uid(), "Movies")` and if want to pass custom id  it could be `database.createCollection(new Uid("movies"), "Movies")`

#### Backward Compatibilities

Even though **id** will be a required parameter, existing SDKs and apps should work as they are without any issues generating custom ids. Having a default Value which allows generating the ID in the controllers should make this possible.

### Future possibilities

[future-possibilities]: #future-possibilities

<!-- This is also a good place to "dump ideas", if they are out of scope for the RFC you are writing but otherwise related. -->
